{"version":3,"sources":["webpack:///webpack/bootstrap 7703c4c9c448a8fd4afc?d3a4","webpack:///./js/plugin/src/post-edit.js"],"names":["WPSimplechartApp","$","appUrl","modalElements","container","backdrop","confirmNoDataMessage","closeModalMessage","savedChart","__postShouldPublish","setPostShouldPublish","newValue","shouldPostPublish","addingNewChart","window","location","pathname","split","pop","init","WPSimplechartContainer","toString","addEventListener","onReceiveMessage","renderModal","replace","append","click","openModal","show","hideModal","hide","getMessageType","evt","origin","test","messageType","data","err","sendToApp","WPSimplechartBootstrap","isNewChart","parseBootstrapData","saveChart","messageData","childWindow","document","getElementById","contentWindow","Error","postMessage","Object","keys","reduce","key","toSend","JSON","parse","e","newSubtitle","forEach","subtitle","saveToField","value","chartOptions","embedHeight","setPostTitleField","publishPost","chartMetadata","updateWidget","fieldId","stringify","postTitleField","querySelector","title","className","addNotice","noticeType","message","notice","createElement","content","innerText","appendChild","publishButton","widgetUpdate","CustomEvent","detail","chartData","options","metadata","getWidgetId","dispatchEvent","postId","exec","search","pagenow","jQuery","ready"],"mappings":"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","file":"postEdit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7703c4c9c448a8fd4afc","/* eslint-disable */\n/**\n * Open, close, and communicate with the iframe containing the app\n */\n\nfunction WPSimplechartApp( $ ) {\n\t// setup scoped vars\n\tvar appUrl,\n\t\tmodalElements = {\n\t\t\tcontainer : '<div id=\"simplechart-modal\"><iframe id=\"simplechart-frame\" src=\"{{iframeSrc}}\"></iframe></div>',\n\t\t\tbackdrop : '<div id=\"simplechart-backdrop\"></div>'\n\t\t},\n\t\tconfirmNoDataMessage = '',\n\t\tcloseModalMessage = '',\n\t\tsavedChart = false;\n\n\t// do not update directly!\n\tvar __postShouldPublish = true;\n\n\tfunction setPostShouldPublish( newValue ) {\n\t\t__postShouldPublish = newValue;\n\t}\n\n\tfunction shouldPostPublish() {\n\t\t// use !! to always return boolean\n\t\treturn !! __postShouldPublish;\n\t}\n\n\t/**\n\t * True if adding a new chart; false if editing a chart\n\t */\n\tfunction addingNewChart() {\n\t\treturn 'post-new.php' === window.location.pathname.split( '/' ).pop();\n\t}\n\n\t/**\n\t * Set scope var values and build modal element\n\t */\n\tfunction init() {\n\t\tappUrl = window.WPSimplechartContainer.appUrl.toString();\n\t\tconfirmNoDataMessage = window.WPSimplechartContainer.confirmNoDataMessage.toString();\n\t\tcloseModalMessage = window.WPSimplechartContainer.closeModalMessage.toString();\n\t\twindow.addEventListener( 'message', onReceiveMessage );\n\t\trenderModal();\n\t}\n\n\t/**\n\t * Renders the app iframe modal in its open state\n\t */\n\tfunction renderModal() {\n\t\t// create modal elements and append to <body>\n\t\tmodalElements.container = modalElements.container.replace( '{{iframeSrc}}', appUrl);\n\t\tmodalElements.container = modalElements.container.replace( '{{closeModal}}', closeModalMessage);\n\t\t$( 'body' ).append( modalElements.container + modalElements.backdrop );\n\n\t\t// Listen for click to open modal\n\t\t$( '#simplechart-launch' ).click( openModal );\n\n\t\t// Open modal if creating new chart\n\t\tif ( addingNewChart() ) {\n\t\t\topenModal();\n\t\t}\n\t}\n\n\t/**\n\t * Reopens already-rendered modal\n\t */\n\tfunction openModal() {\n\t\t$( '#simplechart-backdrop, #simplechart-modal' ).show();\n\t}\n\n\t/**\n\t * Hide modal\n\t */\n\tfunction hideModal() {\n\t\t$( '#simplechart-backdrop, #simplechart-modal' ).hide();\n\t}\n\n\t/**\n\t * Extract messageType string when a postMessage is received\n\t */\n\tfunction getMessageType( evt ) {\n\t\t// confirm same-origin or http(s)://localhost:8080\n\t\tif ( evt.origin !== window.location.origin && !/https?:\\/\\/localhost:8080/.test( evt.origin ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar messageType;\n\t\ttry {\n\t\t\tmessageType = evt.data.messageType;\n\t\t} catch( err ) {\n\t\t\tthrow err;\n\t\t}\n\n\t\treturn messageType;\n\t}\n\n\t/**\n\t * adds listeners for specific messageType from child window\n\t */\n\tfunction onReceiveMessage( evt ) {\n\t\tvar messageType = getMessageType( evt );\n\t\tif ( ! messageType ) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch( messageType ) {\n\t\t\tcase 'appReady':\n\t\t\t\tsendToApp(\n\t\t\t\t\tWPSimplechartBootstrap.isNewChart ? 'bootstrap.new' : 'bootstrap.edit',\n\t\t\t\t\tparseBootstrapData()\n\t\t\t\t);\n\t\t\t\tbreak;\n\n\t\t\tcase 'closeApp':\n\t\t\t\thideModal();\n\t\t\t\tbreak;\n\n\t\t\tcase 'saveChart':\n\t\t\t\tsaveChart( evt.data.data );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\t// nothing\n\t\t}\n\t}\n\n\t/**\n\t * Send previously saved data to child window\n\t */\n\tfunction sendToApp( messageType, messageData ) {\n\t\tvar childWindow = document.getElementById( 'simplechart-frame' );\n\t\tif ( ! childWindow || ! childWindow.contentWindow ) {\n\t\t\tthrow new Error( 'Missing iframe#simplechart-frame' );\n\t\t}\n\n\t\tchildWindow.contentWindow.postMessage( {\n\t\t\tmessageType: messageType,\n\t\t\tdata: messageData\n\t\t}, '*' );\n\t}\n\n\t/**\n\t * Build data object to send to chart editor window, parsing stringified JSON as needed\n\t */\n\tfunction parseBootstrapData() {\n\t\t// WPSimplechartBootstrap defined in meta-box.php\n\t\tif ( ! window.WPSimplechartBootstrap ) {\n\t\t\tthrow new Error( 'Missing window.WPSimplechartBootstrap' );\n\t\t}\n\n\t\treturn Object.keys( window.WPSimplechartBootstrap ).reduce(function(data, key) {\n\t\t\tvar toSend;\n\t\t\ttry {\n\t\t\t\ttoSend = JSON.parse( window.WPSimplechartBootstrap[ key ] );\n\t\t\t} catch( e ) {\n\t\t\t\ttoSend = window.WPSimplechartBootstrap[ key ];\n\t\t\t}\n\t\t\tdata[ key ] = toSend;\n\t\t\treturn data;\n\t\t}, {} )\n\t}\n\n\t/**\n\t * save individual elements of data from chart editor\n\t */\n\tfunction saveChart( data ) {\n\t\tvar newSubtitle;\n\t\tObject.keys( data ).forEach( function( key ) {\n\t\t\t// If subtitle is set, rip it out and save it separately\n\t\t\tif ('chartMetadata' === key) {\n\t\t\t\tif ('undefined' !== typeof data[key].subtitle) {\n\t\t\t\t\tnewSubtitle = data[key].subtitle;\n\t\t\t\t\tsaveToField('save-chartSubtitle', newSubtitle);\n\t\t\t\t\tdelete data[key].subtitle;\n\t\t\t\t} else {\n\t\t\t\t\tsaveToField('save-chartSubtitle', false);\n\t\t\t\t}\n\t\t\t}\n\t\t\tsaveToField( 'save-' + key, data[key] );\n\t\t} );\n\n\t\t// Save height to its own custom field\n\t\tdocument.getElementById('save-embedHeight').value = data.chartOptions.embedHeight;\n\n\t\tsetPostTitleField( data );\n\n\t\t// auto-publish if we are creating a new chart\n\t\tif ( addingNewChart() ) {\n\t\t\tpublishPost();\n\t\t} else {\n\t\t\t// Re-apply subtitle to chartMetadata, so new values are reflected in chart preview.\n\t\t\tdata.chartMetadata.subtitle = newSubtitle;\n\t\t\tupdateWidget( data );\n\t\t\thideModal();\n\t\t}\n\t}\n\n\t/**\n\t * Receive new data from child window and set value of hidden input field\n\t */\n\tfunction saveToField( fieldId, data ) {\n\t\tif ( 'string' !== typeof data ) {\n\t\t\tdata = JSON.stringify( data );\n\t\t}\n\t\tdocument.getElementById( fieldId ).value = data;\n\t}\n\n\t/**\n\t * Handle any special exceptions when receiving data from app\n\t */\n\tfunction setPostTitleField( data ) {\n\t\t// Update post_title field if needed\n\t\tvar postTitleField = document.querySelector( 'input[name=\"post_title\"]' );\n\t\tif ( data.chartMetadata.title ) {\n\t\t\tpostTitleField.value = data.chartMetadata.title;\n\t\t\t// hides placeholder text\n\t\t\tdocument.getElementById( 'title-prompt-text' ).className = 'screen-reader-text';\n\t\t} else if ( ! postTitleField.value ) {\n\t\t\taddNotice( 'error', 'Please enter a WordPress internal identifier.' );\n\t\t\tsetPostShouldPublish( false );\n\t\t}\n\t}\n\n\t/**\n\t * Add a notification in side the container created during the admin_notices hook\n\t * https://codex.wordpress.org/Plugin_API/Action_Reference/admin_notices\n\t *\n\t * @param string noticeType Should notice-error, notice-warning, notice-success, or notice-info\n\t * @param string message Text-only, no HTML\n\t * @return none\n\t */\n\tfunction addNotice( noticeType, message ) {\n\t\tvar container = document.getElementById( 'simplechart-admin-notices' );\n\t\tif ( ! container ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar notice = document.createElement( 'div' );\n\t\tnotice.className = 'notice is-dismissable notice-' + noticeType;\n\t\tvar content = document.createElement( 'p' );\n\t\tcontent.innerText = message;\n\t\tnotice.appendChild( content );\n\t\tcontainer.appendChild( notice );\n\t}\n\n\t/**\n\t * Trigger publishing when data is received for a new post\n\t */\n\tfunction publishPost() {\n\t\tif ( shouldPostPublish() ) {\n\t\t\t// make extra super sure publish button exists as expected\n\t\t\tvar publishButton = document.querySelector( '#simplechart-save input#publish' );\n\t\t\tif ( publishButton ) {\n\t\t\t\t$( publishButton ).click();\n\t\t\t\tsendToApp( 'cms.isSaving', null );\n\t\t\t} else {\n\t\t\t\thideModal();\n\t\t\t\taddNotice( 'success', 'Your chart is ready! Click Publish to continue.' );\n\t\t\t}\n\t\t} else {\n\t\t\t// Only hide the modal if publishing is blocked for some reason,\n\t\t\t// e.g. a missing post_title\n\t\t\thideModal();\n\t\t}\n\t}\n\n\t/**\n\t * Trigger an update on the embedded chart widget\n\t *\n\t * @param obj data Data received from app\n\t */\n\tfunction updateWidget( data ) {\n\t\tvar widgetUpdate = new CustomEvent( 'widgetData', {\n\t\t\tdetail: {\n\t\t\t\tdata: data.chartData,\n\t\t\t\toptions: data.chartOptions,\n\t\t\t\tmetadata: data.chartMetadata\n\t\t\t}\n\t\t} );\n\t\tdocument.getElementById( getWidgetId() ).dispatchEvent( widgetUpdate );\n\t}\n\n\t/**\n\t * Get expected widget ID\n\t */\n\tfunction getWidgetId() {\n\t\tvar postId = /post=(\\d+)/.exec(window.location.search)[1];\n\t\treturn 'simplechart-widget-' + postId;\n\t}\n\n\t// GO GO GO\n\tinit();\n}\n\nif ( 'undefined' !== typeof pagenow && 'simplechart' === pagenow ){\n\tjQuery( document ).ready( function() {\n\t\tWPSimplechartApp( jQuery );\n\t} );\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/plugin/src/post-edit.js"],"sourceRoot":""}